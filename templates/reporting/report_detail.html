{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>Report Detail</h2>

    <p><strong>House:</strong> {{ report.house_number }}</p>
    <p><strong>Violation:</strong> {{ report.violation }}</p>
    <p><strong>Status:</strong> {{ report.status }}</p>
    <p><strong>Fine:</strong> ${{ report.fine_amount }}</p>
    <p><strong>Description:</strong> {{ report.description }}</p>
    <p><strong>Date:</strong> {{ report.created_at|date:"Y-m-d H:i" }}</p>

    {% if report.image %}
        <h5>Uploaded Image:</h5>
        <a href="{{ report.image.url }}" target="_blank">
            <img src="{{ report.image.url }}" alt="Report Image" class="img-fluid mb-2" style="max-width:300px;">
        </a>
    {% endif %}

    {% if report.latitude and report.longitude %}
        <h5>Location:</h5>
        <div id="map" style="height:350px;"></div>
    {% endif %}

    <a href="{% url 'report_list' %}" class="btn btn-secondary mt-3">Back to Reports</a>
</div>

<script>
{% if report.latitude and report.longitude %}
document.addEventListener("DOMContentLoaded", function () {
    var map = L.map('map').setView([{{ report.latitude }}, {{ report.longitude }}], 16);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);
    L.marker([{{ report.latitude }}, {{ report.longitude }}]).addTo(map);
});
{% endif %}
</script>
{% endblock %}
